[TOC]

# 模糊控制基础

## 一.模糊集合与模糊推理

### 1.模糊理论发展历史

萌芽，20世纪60年代，==Zadeh==的论文《模糊集合》为代表

20世纪70年代，模糊理论成为独立的科研领域

20世纪80年代，模糊理论广泛应用（家电，机器人，地铁）

20世纪90年代，模糊理论仍有许多挑战

IEEE Transactions on Fuzzy Systems  期刊

IEEE WCCI（World Congress on Computational Intelligence）

### 2.模糊集合

`任何科学理论中有它的研究对象，这些对象构成一个不空的集合，称为论域。`

#### a.定义：

- 设论域U，U到[0,1]闭区间的一个任意映射为$\mu_{A}$, $\mu_{A}$:U→[0,1]。A为U的一个模糊集合。$\mu_{A}$为A的隶属度函数，其中u为U中的点或元素，==$\mu_{A}(u)$表示元素u对A的隶属度==，其接近1，表示u属于A的程度高，接近0，表示属于A的程度低。

#### b.表示方法：

- **Zadeh表示法**

  (a)U为离散的有限域{u1,u2,...un},则U上的模糊集A可写为
  $$
  A=\sum_{i=1}^{n}\frac{\mu_{A}(i)}{x_{i}}=\frac{\mu_{A}(x_{1})}{x_{1}}+\frac{\mu_{A}(x_{2})}{x_{2}}+...\frac{\mu_{A}(x_{n})}{x_{n}}
  $$
  注意:这里的累加符号、"+"和"分号"==不代表加法==,只是概括集合各个元素的记号;$\frac{\mu_{A}(i)}{x_{i}}$不代表分数,它表示==点xi对模糊集合的隶属度为$\mu_{A}(x_{i})$==.

  (b)U为连续有限域
  $$
  A=\int_{U}\frac{\mu_{A}(u)}{u}
  $$
  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\Zadeh表示法例子.PNG" style="zoom:50%;" />

  

- **序偶表示法**(有限集)
  $$
  A=\{(u_{1},\mu_{A}(u_{1})),(u_{2},\mu_{A}(u_{2}),...(u_{n},\mu_{A}(u_{n})\}
  $$
  那么上述例子中的子集就可以表示如下:
  $$
  \widetilde{A}=\{(u_{1},0.7),(u_{2},0.9),(u_{3},0.6),(u_{4},0.4),(u_{6},0.1)\}
  $$

- **向量表示法**
  $$
  A=\{\mu_{A}(u_{1}),\mu_{A}(u_{2}),...\mu_{A}(u_{n})\}
  $$
  用这种方法,上述例子可以表示为:
  $$
  \widetilde{A}=\{0.7,0.9,0.6,0.4,0,0.1,0,0\}
  $$
  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\前三种隶属度表示法.PNG" style="zoom:50%;" />

- **函数描述法（隶属函数法）**

  ​	<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\函数表示法.PNG" style="zoom:60%;" />
  
  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\函数&Zadeh表示法.PNG" style="zoom:50%;" />
  
  

#### c.模糊集合的运算

- 交集，隶属度取最小的

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊集合交集.PNG" style="zoom:50%;" />

- 并集，隶属度取最大的

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊集合并集.PNG" style="zoom:50%;" />

- 补集

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊集合补集.PNG" style="zoom:50%;" />

  例子:

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\交并补例子1.PNG" style="zoom:50%;" />

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\交并补例子2.PNG" style="zoom:50%;" />

### 3.模糊推理基础

#### a.语言变量定义

如果一个变量能够取普通言语中的**词语为值**，称该变量为==语言变量==。词语由定义在论域上的模糊集合描述,变量也是定义在论域上的.

例子:汽车速度是一个**变量x**，取值范围为[0,Vmax], Vmax是汽车的最快速度，定义三个模糊集合**慢速、中速、快速**。如果x是语言变量，那么它可以取**慢速**、**中速**、**快速**三个值。

语言变量取值称为==语言值==,语言值可用模糊集合表示,即模糊语言值.

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊语言值.PNG" style="zoom:50%;" />

#### b.判断和推理

1)判断句,概念和概念的结合

"u是a",清晰判断句

"偏差大"模糊判断句

2)推理句,已知判断引申出新判断过程

例:若他是研究生,则他是学生.

3)模糊推理句

->**已知模糊命题，推出新的模糊命题作为结论的过程。**

->模糊推理句不能给出绝对的真与假，只能给出真的程度。

若u是晴天,则u很暖和.   晴天和很暖和均为模糊集合

#### c.模糊关系

模糊关系表示多个集合的元素间具有某种关系的程度

- **定义:**所谓X、Y两集合的笛卡尔积($X\times Y=\{(x,y)|x\in X,y\in Y\}$)中的一个模糊关系R是指以$X\times Y$为论域的一个模糊子集,其序偶(x,y)的隶属度为$\mu_{R}(x,y)$.  

- $\mu_{R}(x,y)$在[0,1]上取值,大小反映了(x,y)具有关系R的程度

- 模糊关系合成

  由A,B两集合的模糊关系,A,C两集合的模糊关系得到B,C两集合模糊关系的运算.

- 模糊关系合成定义

  设Q是X×Y中的模糊关系，R是Y×Z中的模糊关系，则Q到R的合成S是定义在X×Z上的模糊关系，记为$S=Q\circ R$==(先交再并)==

  注:
  $$
  \mu_{Q\circ R}(x,z)=\lor\{\mu_{Q}(x,y)\land \mu_{R}(y,z)\}
  $$
  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊关系合成.PNG" style="zoom:60%;" />

  (按找矩阵相乘-->对应元素相乘的顺序进行模糊关系合成)(存疑)

例:商品楼设计方案评价: 这个例子中后面就是矩阵相乘;      **这个例子中的规一化方法是什么**?

例:汽车故障检修:我们已经知道故障是什么了,答案给出的就是通过让故障矩阵和模糊诊断矩阵进行运算,然后的出每一样故障(七种)可能发生的概率值.

#### d. Zadeh模糊推理计算原理

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\Zadeh模糊推理计算原理.PNG" style="zoom:50%;" />

例1:
$$
\mu_{R}(x,y)=\mu_{A→B}(x,y)=[\mu_{A}(x)\land \mu_{B}(y)]\lor[1-\mu_{A}(x)]
$$

$$
\mu_{R}(1,3)=\mu_{A→B}(1,3)=[\mu_{A}(1)\land \mu_{B}(3)]\lor[1-\mu_{A}(1)]=[1\land 0]\lor[1-1]=0
$$

![](E:\研究生\研一\上半学年\机器人智能控制\图片\Zadeh模糊推理计算例1.PNG)

例2:

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\Zadeh模糊推理计算例2.PNG" style="zoom:60%;" />

第二问中=="如果x较小"==属于小前提,在此情况下,要算y的大小的话,就需要用到简单的模糊推理

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\简单模糊推理过程.PNG" style="zoom:60%;" />

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\Zadeh模糊推理计算例2第2问.PNG" style="zoom:60%;" />

### 4.模糊条件语句/模糊规则

#### a.单输入模糊条件语句

句型:若A则B否则C

可以表示为:$(a→b)\lor(a^{c}→c)$

该模糊关系矩阵$\widetilde{R}$中个元素根据下式计算
$$
\mu_{(\widetilde{A}→\widetilde{B})\lor(\widetilde{A}^{c}→C)}(x,y)=[\mu_{\widetilde{A}}(x)\land \mu_{\widetilde{B}}(y) ]\lor[(1-\mu_{\widetilde{A}}(x))\land \mu_{\widetilde{C}}(y)]
$$
<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\单输入模糊条件语句小前提.PNG" style="zoom:60%;" />

**例:**

**==这里的$H_{2}$应该是代表元素自身相乘(存疑)==**

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\单输入语句例子_1.PNG" style="zoom:60%;" />

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\单输入语句例子_2.PNG" style="zoom:60%;" />

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\单输入语句例子_3.PNG" style="zoom:60%;" />

(对$\widetilde{B}_{1}$的计算就是选取交再取并)

#### b.多输入模糊语句

句型:"若$\widetilde{A}且\widetilde{B}则\widetilde{C}$"

其中模糊关系$\widetilde{R}为:$$\widetilde{R}=(\widetilde(A)\times \widetilde{B})^{T列}\times \widetilde{C}$

当输入两个$\widetilde{A}_{1}$和$\widetilde{B}_{1}$,则有输出$\widetilde{C}_{1}$,它们之间满足:
$$
\widetilde{C}_{1}=(\widetilde{A}_{1}\times \widetilde{B}_{1})^{T行}\circ \widetilde{R}
$$
<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\多输入模糊语句例_1.PNG" style="zoom:60%;" />

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\多输入模糊语句例_2.PNG" style="zoom:50%;" />

#### c.多重模糊语句

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\多重模糊语句.PNG" style="zoom:50%;" />

#### d.多输入模糊语句

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\多重多输入模糊语句.PNG" style="zoom:50%;" />

## 二.模糊控制器基本结构

传统控制系统:PID控制器

模糊控制系统方块图:

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\模糊控制系统方块图.PNG" style="zoom:50%;" />



模糊控制器组成:**模糊化(模糊器)   清晰化(解模糊器)   知识库(规则库) ,模糊推理(模糊推理机)**

### 1.模糊化(模糊器) 

==将输入的精确量转化为模糊量.==

1)对输入量进行处理变成模糊控制器要求的输入量。如计算输入与输出之间的误差和误差的导数。（使输入符合要求，例如模糊控制器要求的输入量=输入与输出之间的误差和误差的导数）==（存疑）==

2)对处理过的输入量进行尺度变换，使其符合论域范围。

3)进行模糊处理，使精确的输入量变成模糊量。

#### a.高斯模糊器

将$x\in U$映射到U上的模糊集合A，该集合具有高斯隶属函数
$$
\mu_{A}(x)=exp[-(\frac{x-x_{0}}{\sigma})^{2}]
$$
<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\高斯模糊器.PNG" style="zoom:50%;" />

#### b.三角形模糊器

将$x\in U$映射到U上的模糊集合A，该集合具有三角形隶属函数
$$
\mu_{A}(x)=
\begin{equation}
\begin{cases}
(1-\frac{|x-x_{0}|}{b})\space \space \space if |x-x0|< b\\
0\space \space\space else
\end{cases}
\end{equation}
$$
(b应该代表的是那一半的长度)

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\三角形模糊器.PNG" style="zoom:50%;" />

### 2.清晰化(解模糊器) 

==将模糊推理得到的控制量（模糊量）变换为实际用于控制的清晰量==

1)模糊控制量→论域范围的清晰量

2)论域范围的清晰量  由 尺度变换  得到  实际控制量

==为了获得准确的控制量，就要求模糊方法能够很好的表达输出隶属度函数的计算结果。==

#### a.重心解模糊器

重心法是取隶属度函数曲线与横坐标围成面积的重心（横坐标），作为模糊推理的最终输出值，即（以下为高数下册中讲解的重心求解公式）：

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\重心解模糊器.PNG" style="zoom:50%;" />

#### b.中心平均(加权平均)解模糊器

B‘是M个模糊集的模糊并或交合成，因此一个好的逼近就是M个模糊中心的加权平均，其权重等于相应模糊集的高度。

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\中心平均解模糊器.PNG" style="zoom:50%;" />

#### c.最大值解模糊器

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\最大值解模糊器.PNG" style="zoom:50%;" />

### 3.知识库（规则库）

由==数据库和模糊控制规则库==两部分组成。

1)规则库包括了用模糊语言变量表示的一系列控制规则，反映了控制专家的经验和知识。

2)数据库包括各语言变量的隶属度函数、尺度变换因子以及模糊空间的分级数等。

在模糊控制中，模糊控制规则的前提为==具体应用领域中的条件==，结论为==要采取的控制行动==。对于两输入单输出系统，模糊控制规则可以表示如下：

​    **R**1:  IF  x is A1and y is B1 THEN  z is C1

#### a.**语言名称含义：**

如**NB** (Negative Big，负大)；**NM** (Negative Medium，负中)；**NS** (Negative Small，负小)；ZE (Zero，零)；**PS** (Positive Small，正小)；**PM** (Positive Medium，正中)；**PB** (Positive Big，正大)。或者**N** (Negative，负)；**Z** (Zero，零)；**P** (Positive，正)

#### b.**模糊集合的隶属（度）函数选择**

对于**论域为离散、且元素个数为有限**时，模糊集合的隶属度函数可用==向量或表格==的形式来表示。

对于论域为**连续**的情况，隶属度常常用函数的形式来描述，最常见的隶属度函数有==铃形函数、三角形函数、梯形函数==等。

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\隶属度函数.PNG" style="zoom:50%;" />

### 4.模糊推理(模糊推理机)

#### a. MIN-MAX-重心法

就是A和B之间较小的一个隶属度

条件部，先求交集，再与结论部运算，（C1中隶属行数和b取交集）

结论部求并集，每一点求最大值

#### b.代数积-加法-重心法

a,b分别是隶属度，条件部求其乘积，条件部的适应度ab，ab乘以C1的每一个高度

C‘=C1’+C2‘

#### c.关系合成推理法

先求出模糊关系R，再根据输入求出控制量，将控制量清晰化，导出模糊控制表（查询表）

模糊控制查询表



### 5.模糊控制举例

模糊控制适用对象：

Mathematical Model of control plant is not available

Mathematical model is nonlinear

Mathematical Model is only partially known

Mathematical Model is with uncertainty  鲁棒性较强



模糊控制系统结构分类

a)模糊PID控制器

b)在线调整PID参数  PID模糊控制器

c)切换型模糊控制器

d)复合型模糊控制器

e)自校正模糊控制器 k1 k2可以通过智能调节器调整

遗传算法GA 优化参数



水下机器人

浙江大学？张磊？

空间误差解算方法



章华  南昌大学 巡检机器人

超声波  距离隶属度函数



自动驾驶车 高速路上，自动巡航，按照一定速度跑   模糊控制器如何实现 速度控制（跟踪给定的速度）？速度偏差及偏差的一阶导数作为输入， 





mamdani模糊模型  标准模糊模型



## 三.T-S模糊模型

模糊关系是个多项式，







## 四.模糊神经网络

### 1.标准模糊模型的模糊神经网络

FNN模糊神经网络的结构

第一层为输入层，

第二层为模糊量化层

第三层为规则推理层，计算出每条规则的适应度

第四层为规则合成层，实现归一化计算，

第五层为输出层，实现清晰化计算（$w_{ij}对应y_{ci}$）



误差代价函数为：
$$
E=\frac{1}{2}\sum_{i=1}^{r}(y_{di}-y_{i})^{2}
$$




$P_{0}^{i}$常数







T-S  TNN 下面前件网络       上面 后件网络 





模糊控制系统基础

A.模糊化



二型模糊系统及其在飞行控制中的应用

x可能是有误差的，可能是在三角形底边上的某一点

二型模糊集合简介；

一型：隶属度精确值

二型：隶属度是一型模糊集合的模糊集合.       给了论域之后，隶属度是一个范围，



从那个面截过去，左视图，   主隶属度，次隶属度

上下合在一起，就是一型隶属度函数，不合在一起，就是二型



高度，次隶属度的大小









