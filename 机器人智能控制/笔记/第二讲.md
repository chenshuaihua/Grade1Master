## 一.背景介绍

- 启发式方法，不一定收敛，不一定有最优解；不基于模型

进化计算：==**遗传算法GA**==（重点）

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\背景介绍.PNG" style="zoom:50%;" />

### 什么是进化计算？

进化计算是一种模拟自然界生物进化过程与机制进行问题求解的自组织、自适应的随机搜索技术。它以达尔文进化论的==“物竟天择、适者生存”==作为算法的进化规则，并结合孟德尔的==遗传变异==理论，将生物进化过程中的

- ==繁殖==（Reproduction）

- ==变异==（Mutation）

- ==竞争==（Competition）

- ==选择==（Selection）引入到了算法中。

20世纪60年代初期  进化策略 ES(Evolutionary Strategy)

20世纪60年代初期  进化规划EP(Evolutionary Programming) 

1975年 Holland 提出了 遗传算法Genetic Algorithm (GA)

20世纪90年代  Koza在提出遗传规划（也叫遗传编程，Genetic Programming,GP）算法

## 二.SGA

### 基本概念

**种群**（**Population**）,初始给定的多个解的集合。

**个体**（**Individual**）,种群的单个元素，

**染色体**（**Chromos**），涉及到==编码方式==，指对个体编码后得到的==编码串==，染色体中的每一位称为基因。

**适应度**（**Fitness**）**函数**，是用来对种群中个体的环境适应性进行度量的函数。其函数值是优胜略汰的主要依据

**遗传操作**（**Genetic Operator**）

- 选择(select)，交叉(crossover)，变异(mutation)

每个个体就是潜在的最优解或者说待优化的参数

==[遗传算法入门例子](https://www.cnblogs.com/ow0843/p/9552455.html)==

### 个体编码方式

- 二进制编码   十进制编码，符号编码       一个例子

  个体数目的选取，个体数量M过大（多样性，但是运行效率低）或过小（多样性差）都不合适，建议20-100

  ==编码精度和编码长度==： $\delta$为编码精度， $l$为编码长度

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\编码精度和编码长度.PNG" style="zoom:50%;" />

  二进制编码例子

  <img src="E:\研究生\研一\上半学年\机器人智能控制\图片\二进制编码例子.PNG" style="zoom:50%;" />

- 格雷码

  ​	相邻两数之间只有一位不同

  ​	格雷码的递归生成规则

  ​	二进制和格雷码之间的转换   是位操作（==异或操作==）   

- 浮点数编码  真实值编码，如1.2编码就是1.2

- 符号编码，1编码为A（无数值含义的符号），

### 适应度

度量个体适应度的函数，也称为待求解问题的目标函数值。

**适应度尺度变换**：**线性变换**（重点就是==求斜率和截距==）、$f^{'}=\alpha f+\beta$ 

​								**非线性变换**：幂函数变换$f^{'}=f^{k}$ ，指数变换$f^{'}=e^{-\alpha f}$ ，对数函数变换$f^{'}=log f$

### 选择  Selection

1. **轮盘赌**, 产生[0,1]之间的随机数作为选择指针来确定被选个体适应度为==正==
2. **竞标赛选择法**，随机从种群中挑出一定数目个体（[2,个体总数]），然后把最好的选出来，个体适应度==可正可负==。
3. **排序选择法**    对个体按适应度大小降序排列，然后分配个体被选中概率， 概率值人为设定，与适应度的大小无关。个体适应度==可正可负==
4. **最佳个体保存法**   ==直接保留适应度最高个体==（也称==精英保留==策略  elitist preserve）

选择方法特点：

1. 适应度高的个体易快速繁殖，使算法收敛到局部最优解
2. 个体适应度接近时，易使进化停顿，解决思路：==适应度尺度变换==

==累计概率是个啥？？？？？==

`Example:`

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\选择方法例子.PNG" style="zoom:50%;" />

### 交叉

遗传算法中的交叉操作可分为==二进制交叉==和==实值交叉==两种类型。

#### 二进制交叉1-单点交叉

交叉概率$P_{c}$的选取 0.4~0.99，随机选择一个交叉点

#### 二进制交叉2-多点交叉



#### 二进制交叉3-随机交叉

对个体的每一位随机选择交叉与否。

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\二进制交叉-随机交叉.PNG" style="zoom:50%;" />

#### 实值交叉

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\实值交叉.PNG" style="zoom:50%;" />

### 变异

#### ==二进制变异==：

变异前：10000111；变异后：10==1==00111；

变异概率$p_{m}$建议范围0.0001~0.1，太大破坏优良个体；太小新个体产生速度过慢。

#### ==实值变异==：

均匀变异：随机选取$\alpha$

$$Y = U_{min}+\alpha \times (U_{max}-U_{min})$$

高斯分布：随机数符合高斯分布

#### 终止条件

终止代数，–进化计算运行到指定代数就终止

判定准则    –连续几代的平均适应度的差异小于一个指定阈值

### ==简单计算流程==：

种群初始化(0) → 计算适应度，选择(1)  → 交叉(2)  → 变异(3) → 形成新一代，更新种群(4)  → 满足终止条件则结束，否则返回(1)     (5)

### 参数讨论：

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\简单遗传算法参数讨论.PNG" style="zoom:50%;" />

## 三.改进型遗传算法 

### 1.分层遗传算法

模拟生物进化过程中的基因隔离和基因迁移，各子群之间既有相对的封闭性，又有必要的交流和沟通。 ==分为N个subpopulation,遗传算法各自运行（SGA），但是遗传操作在**种群间**进行，然后循环，直至收敛==

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\分层遗传算法基本思想.PNG" style="zoom:50%;" />

### 2.混合遗传算法

例如和模拟退火结合

遗传算法特点：

1. 前期，个体适应度差异大，易早熟
2. 后期，个体适应度差异小，易停滞

模拟退火作用/本质：==适应度缩放==

1. 前期（高温），减少个体适应度差异
2. 后期（低温），放大个体适应度差异，突出优秀个体

早期减小差异，晚期拉大差异

模拟退火的退火速度A

- 快：易震荡
- 慢：易停滞

### 3.自适应遗传算法

问题：$p_{c}和p_{m}$,过大或过小均不合适。

方法：交叉和变异的概率随适应度自动改变

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\自适应遗传算法思想.PNG" style="zoom:50%;" />

### 4.==原对偶遗传算法==（重点） Primal-Dual GA

PDGA 解决==动态优化问题==

上面的解决的都是静态优化问题（适应或目标函数不变），在线的遗传算法怎么去做？

动态优化问题：目标函数随环境等改变而变化

**原-对偶染色体**定义为某个距离空间内距离最大的一对染色体，   其实就是定义了一步跳很远的操作，这个操作对种群可能起到很大变化，而这个变化很有可能适应新的环境,==**如原染色体01011，对偶染色体10100**==

hamming距离，==两个染色体对应基因位点的值不同的基因个数==

•在一对原对偶染色体中，如果对偶染色体优于原染色体，则这样的映射为有效映射，否则为无效映射

#### PDGA算法流程：

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\PDGA算法流程.PNG" style="zoom:50%;" />

#### **潜在问题**：

一对原对偶染色体基因型截然相反，在种群进化后期，大多数染色体都分布在适应值较大区域，其对偶染色体适应值较低，因此大多数PDM运算都会失效，因此难以产生多样性和最好的解，但却会==浪费计算资源==； 如果环境的变化较小，这样过于“强烈”的PDM运算不会明显改善算法性能。

**改进思路**：

并不让染色体中每一位基因都参与PDM（primal dual  mapping）运算，而是按概率决定是否参与运算

<img src="E:\研究生\研一\上半学年\机器人智能控制\图片\原对偶遗传算法改进方法.PNG" style="zoom:50%;" />

*fsi*为 在种群中符号*s*在基因位点*i*上的出现频率（s就是0/1）

自己的想法：是这样子吗？：例如某一个个体的编码，它的第0位的编码上1出现的概率为1，就让这一位参加原对偶映射；而第一位上1出现的概率为0.5，那么这一位进行PDM运算的概率就是0。

## 四.旅行商问题

规划问题

G编码 ，非常巧妙，G编码举例：

巡回路线为T = (1,2,3,4,5,6,7,8,9,10)   编码为  G = (1,1,1,1,1,1,1,1,1,1)

巡回路线为Tx = (1,4,2,8,6,9,10,7,5,3)  编码为 G = (1,3,1,5,3,4,4,3,2,1)

巡回路线为Tx = (2,3,1,4,5,10,8,9,6,7)编码为 G = (2,2,1,1,1,5,3,3,1,1)























































































